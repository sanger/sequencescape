<%# This file is part of SEQUENCESCAPE; it is distributed under the terms of
# GNU General Public License version 1 or later;
# Please refer to the LICENSE and README files for information on licensing and
# authorship of this file.
# Copyright (C) 2007-2011,2015,2016 Genome Research Ltd.%>

<div class="info" id="batch_events">
<table class="table table-striped">
  <thead>
    <th>Event type</th>
    <th>Event description</th>
    <th>Created at</th>
    <th>User</th>
  </thead>
  <tbody>
    <% if events.empty? -%>
      <tr>
        <td colspan="4">No events</td>
      </tr>
    <% else -%>
      <% events.each do |event| -%>
        <% unless event.description.nil? -%>
          <tr>

            <td><span class='<%= event.description.downcase %>'><%= event.description.capitalize %></td>

            <% if event.descriptors.size != 0 -%>
              <td><%= event.descriptor_value "task" %></td>
            <% else -%>
              <td><%= event.message %></td>
            <% end -%>

            <td><%= event.created_at.nil? ? 'Unknown' : event.created_at.strftime("%A %d %B at %H:%M") %></td>

            <% if event.user -%>
              <td><%= event.user.try(:login)||'Unknown' %></td>
            <% else -%>
              <td>&#8211;</td>
            <% end -%>

          </tr>
        <% end -%>
      <% end -%>
    <% end -%>
  </tbody>
</table>
</div>
